{% extends 'base.html' %}

{% block content %}
<style>
    .input-group {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }
</style>

<div class="container">
    <div class="fixed-table-container text-center">
        <div></div>
        <div class="fixed-table-body">
            <table class="table table-light table-hover caption-top">
                <caption style="font-size: 30px;">상세보기</caption>
                <thead>
                    <tr>
                        <th>번호</th>
                        <th>날짜</th>
                        <th>IP</th>
                        <th>이름</th>
                        <th>부서</th>       
                        <th>상태</th>     
                        <th>상세보기</th>
                    </tr>
                </thead>
                <tbody>
                
                <tr>
                    <td>10</td>
                    <td>2023-06-09 15:27</td>
                    <td>192.168.255.1</td>
                    <td>송재원</td>
                    <td>AI</td>
                    <td>대기중</td>
                    <td><button class="btn btn-primary">상세보기</button></td>
                </tr>

                </tbody>
            </table>
        </div>
    </div>

    <div class="pagination">
        <nav aria-label="">
            <ul class="pagination">
                <li class="page-item">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">이전</a>
                </li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#" tabindex="+1" aria-disabled="true">다음</a>
                </li>
            </ul>
        </nav>
    </div>

    <div class="search-wrapper">
        <div class="input-group">
            <div class="form-outline">
                <input type="search" id="search-input" class="form-control" onkeydown="searchTable(event)" />
            </div>
            <button type="button" class="btn btn-primary" onclick="searchTable(event)">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>
</div>

<script>
    function searchTable(event) {
        if (event.keyCode === 13 || event.type === 'click') {
            var input = document.getElementById('search-input').value.trim();
            var table = document.getElementsByTagName('table')[0];
            var rows = table.getElementsByTagName('tr');

            if (input === '') {
                // 검색어가 비어 있는 경우 모든 행을 표시
                Array.from(rows).forEach(function (row) {
                    row.style.display = '';
                });
                return;
            }

            for (var i = 0; i < rows.length; i++) {
                var cells = rows[i].getElementsByTagName('td');
                var match = false;

                var cell = cells[3]; // 컬럼 값 기준 검색
                if (cell) {
                    var text = cell.innerText || cell.textContent;
                    if (text.trim() === input) {
                        // 번호가 일치하는 경우
                        match = true;
                    }
                }

                if (match) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }
    }
</script>

{% endblock content %}
